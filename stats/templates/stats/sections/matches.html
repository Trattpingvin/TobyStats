
<canvas id="canvas-matches"></canvas>
<button onclick="resetZoom()">Reset Zoom</button>
<button id="drag-switch" onclick="toggleDragMode()">Disable drag mode</button>
<script type="text/javascript">
	window.resetZoom = function() {
		window.matchesGraph.resetZoom();
	};
	window.toggleDragMode = function() {
		var chart = window.matchesGraph;
		var zoomOptions = chart.options.plugins.zoom.zoom;
		zoomOptions.drag = !zoomOptions.drag;
		chart.update();
		document.getElementById('drag-switch').innerText = zoomOptions.drag ? 'Disable drag mode' : 'Enable drag mode';
	};

	function buildMatchesGraph(data){
		var canvascontext = document.getElementById('canvas-matches').getContext('2d');
		window.matchesGraph = new Chart(canvascontext, {
			type: 'line',
			data: {
				labels: [new Date(Date.now()-30*24*60*60*1000), new Date()],
				datasets: [{
					label: '1v1',
					data: data['time']['1v1'],
					fill: false,
					borderDash: [5, 5],
				}, {
					label: 'FFA',
					data: data['time']['FFA'],
				}]
			},
			options: {
				responsive: true,
				title: {
					display: true,
					text: 'Offworld ranked history'
				},
				scales: {
					xAxes: [{
						type: 'time',
						time: {
							parser: timeFormat,
							// round: 'day'
							tooltipFormat: 'll HH:mm'
						},
						scaleLabel: {
							display: true,
							labelString: 'Date'
						},
						ticks: {
							maxRotation: 0
						}
					}],
					yAxes: [{
						scaleLabel: {
							display: true,
							labelString: 'value'
						}
					}]
				},
				plugins: {
					zoom: {
						zoom: {
							enabled: true,
							drag: true,
							mode: 'x',
							speed: 0.05
						}
					}
				}
			}
		});
	}

</script>